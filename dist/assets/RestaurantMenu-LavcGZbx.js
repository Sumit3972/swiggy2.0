import{o as X,f as c,C as Z,j as e,L as K,b as ee,u as se,i as te,k as le}from"./index-D9YnBNb_.js";import{A as ae}from"./AddToCartBtn-BegVgeyn.js";import{M as ie}from"./Shimmer-CrEQs_4O.js";let re="https://www.pngkey.com/png/detail/261-2619381_chitr-veg-symbol-svg-veg-and-non-veg.png",ne="https://www.kindpng.com/picc/m/151-1515155_veg-icon-png-non-veg-symbol-png-transparent.png";function he(){var y,k,S,E;const{id:l}=X();let i=l.split("-").at(-1);const[s,f]=c.useState([]),[h,u]=c.useState([]),[d,o]=c.useState([]),[r,N]=c.useState(null),[n,b]=c.useState(0);c.useState(!1);const{coord:{lat:w,lng:C}}=c.useContext(Z);function g(){}function v(){}async function _(){var M,A,G,q,P,T,L,U,I,V,$,F,O,W,Y,z,B;let a=await(await fetch(`https://cors-by-codethread-for-swiggy.vercel.app/cors/dapi/menu/pl?page-type=REGULAR_MENU&complete-menu=true&lat=${w}&lng=${C}&restaurantId=${i.split("rest")[1]}&catalog_qa=undefined&submitAction=ENTER`)).json();const D=(q=(G=(A=(M=a==null?void 0:a.data)==null?void 0:M.cards.find(t=>{var x,m;return(m=(x=t==null?void 0:t.card)==null?void 0:x.card)==null?void 0:m["@type"].includes("food.v2.Restaurant")}))==null?void 0:A.card)==null?void 0:G.card)==null?void 0:q.info,R=(V=(I=(U=(L=(T=(P=a==null?void 0:a.data)==null?void 0:P.cards.find(t=>{var x,m;return(m=(x=t==null?void 0:t.card)==null?void 0:x.card)==null?void 0:m["@type"].includes("v2.GridWidget")}))==null?void 0:T.card)==null?void 0:L.card)==null?void 0:U.gridElements)==null?void 0:I.infoWithStyle)==null?void 0:V.offers;f(D),o(R);let j=($=a==null?void 0:a.data)==null?void 0:$.cards.find(t=>t==null?void 0:t.groupedCard);N(((W=(O=(F=j==null?void 0:j.groupedCard)==null?void 0:F.cardGroupMap)==null?void 0:O.REGULAR)==null?void 0:W.cards).filter(t=>t.card.card.title=="Top Picks")[0]),u((B=(z=(Y=j==null?void 0:j.groupedCard)==null?void 0:Y.cardGroupMap)==null?void 0:z.REGULAR)==null?void 0:B.cards.filter(t=>{var x,m,H,J;return((m=(x=t==null?void 0:t.card)==null?void 0:x.card)==null?void 0:m.itemCards)||((J=(H=t==null?void 0:t.card)==null?void 0:H.card)==null?void 0:J.categories)}))}return c.useEffect(()=>{_()},[]),e.jsx("div",{className:"w-full  ",children:h.length?e.jsxs("div",{className:" w-[95%] md:w-[800px] mx-auto pt-8",children:[e.jsxs("p",{className:"text-[12px] text-slate-500 ",children:[" ",e.jsxs(K,{to:"/",children:[" ",e.jsx("span",{className:"hover:text-slate-700 hover:cursor-pointer",children:"Home"})]})," ","/"," ",e.jsxs(K,{to:"/",children:[" ",e.jsx("span",{className:"hover:text-slate-700 hover:cursor-pointer",children:s.city})]})," ","/ ",e.jsx("span",{className:"text-slate-700",children:s.name})]}),e.jsx("h1",{className:"font-bold pt-6 text-2xl",children:s.name}),e.jsx("div",{className:"w-full h-[206px] bg-gradient-to-t px-4 pb-4 from-slate-200/70  mt-3 rounded-[30px]",children:e.jsxs("div",{className:"w-full border  border-slate-200/70 rounded-[30px] h-full bg-white ",children:[e.jsxs("div",{className:"p-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-1 font-semibold",children:[e.jsx("i",{className:"fi fi-ss-circle-star mt-1 text-green-600 text-lg"}),e.jsx("span",{children:s.avgRating}),e.jsxs("span",{children:["(",s.totalRatingsString,")"]}),".",e.jsx("span",{children:s.costForTwoMessage})]}),e.jsx("p",{className:"underline font-semibold text-orange-600 ",children:(y=s==null?void 0:s.cuisines)==null?void 0:y.join(", ")}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsxs("div",{className:"w-[9px] flex flex-col justify-center items-center",children:[e.jsx("div",{className:"w-[7px] h-[7px] bg-gray-500 rounded-full"}),e.jsx("div",{className:"w-[1px] h-[25px] bg-gray-500 "}),e.jsx("div",{className:"w-[7px] h-[7px] bg-gray-500 rounded-full"})]}),e.jsxs("div",{className:"flex flex-col gap-1 text-sm font-semibold",children:[e.jsxs("p",{children:["Outlet"," ",e.jsx("span",{className:"text-gray-500 font-normal",children:s.locality})]}),e.jsx("p",{children:(k=s.sla)==null?void 0:k.slaString})]})]})]}),e.jsx("hr",{}),e.jsx("div",{className:" w-full",children:e.jsx("div",{className:"flex items-center p-3",children:s.length!==0&&(s!=null&&s.expectationNotifiers)?e.jsxs(e.Fragment,{children:[e.jsx("img",{className:"w-6",src:"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_40,h_40/"+((S=s.feeDetails)==null?void 0:S.icon),alt:""}),e.jsx("span",{className:"text-sm ml-4 text-gray-500 font-normal",children:(E=s==null?void 0:s.expectationNotifiers[0])==null?void 0:E.enrichedText.replace(/<[^>]*>/g,"")})]}):""})})]})}),e.jsxs("div",{className:"w-full overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("h1",{className:"font-bold text-xl",children:"Deals for you"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{onClick:v,className:" cursor-pointer rounded-full w-9 h-9 flex justify-center items-center "+(n<=0?"bg-gray-100":"bg-gray-200"),children:e.jsx("i",{className:"fi text-2xl mt-1 fi-rr-arrow-small-left "+(n<=0?"text-gray-300":"text-gray-800")})}),e.jsx("div",{onClick:g,className:" cursor-pointer rounded-full w-9 h-9 flex justify-center items-center "+(n>=124?"bg-gray-100":"bg-gray-200"),children:e.jsx("i",{className:"fi text-2xl mt-1 fi-rr-arrow-small-right "+(n>=124?"text-gray-300":"text-gray-800")})})]})]}),e.jsx("div",{className:"flex gap-4 mt-5",children:d.map((p,a)=>e.jsx(oe,{data:p},a))})]}),e.jsx("h2",{className:"text-center mt-5 leading-5",children:"MENU"}),e.jsxs("div",{className:"w-full  mt-5 relative cursor-pointer",children:[e.jsx("div",{className:"w-full p-3 rounded-xl font-semibold text-lg bg-slate-200 text-center ",children:"Search for dishes"}),e.jsx("i",{className:"fi fi-rr-search absolute top-3 right-4"})]}),r&&e.jsxs("div",{className:"w-full overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("h1",{className:"font-bold text-xl",children:r.card.card.title}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{onClick:v,className:" cursor-pointer rounded-full w-9 h-9 flex justify-center items-center "+(n<=0?"bg-gray-100":"bg-gray-200"),children:e.jsx("i",{className:"fi text-2xl mt-1 fi-rr-arrow-small-left "+(n<=0?"text-gray-300":"text-gray-800")})}),e.jsx("div",{onClick:g,className:" cursor-pointer rounded-full w-9 h-9 flex justify-center items-center "+(n>=124?"bg-gray-100":"bg-gray-200"),children:e.jsx("i",{className:"fi text-2xl mt-1 fi-rr-arrow-small-right "+(n>=124?"text-gray-300":"text-gray-800")})})]})]}),e.jsx("div",{className:"flex gap-4 mt-5",children:r.card.card.carousel.map(({creativeId:p,dish:{info:{defaultPrice:a,price:D,id:R}}})=>e.jsxs("div",{className:"min-w-[400px] relative h-[405px]",children:[e.jsx("img",{className:"w-full h-full",src:"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_292,h_300/"+p,alt:""}),e.jsxs("div",{className:"absolute bottom-4 text-white flex justify-between w-full px-5",children:[e.jsxs("p",{className:"",children:["₹",a/100||D/100]}),e.jsx("button",{className:" px-10 py-2 font-bold text-green-400 bg-white rounded-xl",children:"Add"})]})]},R))})]}),e.jsx("div",{children:h.map(({card:{card:p}},a)=>e.jsx(Q,{card:p,resInfo:s},a))})]}):e.jsx(ie,{})})}function Q({card:l,resInfo:i}){let s=!1;l["@type"]&&(s=!0);const[f,h]=c.useState(s);function u(){h(d=>!d)}if(l.itemCards){const{title:d,itemCards:o}=l;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-7",children:[e.jsxs("div",{className:"flex justify-between ",children:[e.jsxs("h1",{className:"font-bold text-"+(l["@type"]?"xl":"base"),children:[d," (",o.length,")"]}),e.jsx("i",{className:"fi  text-xl fi-rr-angle-small-"+(f?"up":"down"),onClick:u})]}),f&&e.jsx(ce,{itemCards:o,resInfo:i})]}),e.jsx("hr",{className:"my-5 border-"+(l["@type"]?"[10px]":"[4px]")})]})}else{const{title:d,categories:o}=l;return e.jsxs("div",{children:[e.jsx("h1",{className:"font-bold text-xl",children:d}),o.map((r,N)=>e.jsx(Q,{card:r,resInfo:i},N))]})}}function ce({itemCards:l,resInfo:i}){return e.jsx("div",{className:"my-5",children:l.map(({card:{info:s}})=>e.jsx(de,{info:s,resInfo:i},s.id))})}function de({info:l,resInfo:i}){const{name:s,defaultPrice:f,price:h,itemAttribute:u,ratings:{aggregatedRating:{rating:d,ratingCountV2:o}},description:r="",imageId:N}=l,n=ee(y=>y.toogleSlice.isDiffRes),b=se();function w(){b(te())}function C(){b(le()),w()}const[g,v]=c.useState(!1);let _=r.substring(0,138)+"...";return e.jsxs("div",{className:"relative w-full",children:[e.jsxs("div",{className:"flex w-full justify-between min-h-[182px]",children:[e.jsxs("div",{className:"w-[55%] md:w-[70%]",children:[e.jsx("img",{className:"w-5 rounded-sm",src:u&&u.vegClassifier=="VEG"?re:ne,alt:"",srcSet:""}),e.jsx("h2",{className:"font-bold text-lg",children:s}),e.jsxs("p",{className:"font-bold text-lg",children:["₹",f/100||h/100," "]}),e.jsxs("div",{className:"flex items-center gap-1",children:[" ",e.jsx("i",{className:"fi mt-1 text-xl fi-ss-star"})," ",e.jsxs("span",{children:[d," (",o,")"]})]}),r.length>140?e.jsxs("div",{children:[e.jsx("span",{className:" line-clamp-2 md:line-clamp-none ",children:g?r:_}),e.jsx("button",{className:"hidden md:block font-bold",onClick:()=>v(!g),children:g?"less":"more"})]}):e.jsx("span",{className:"",children:r})]}),e.jsxs("div",{className:"w-[40%] md:w-[20%] relative h-full",children:[e.jsx("img",{className:"rounded-xl aspect-square",src:"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_300,h_300,c_fit/"+N,alt:""}),e.jsx(ae,{info:l,resInfo:i,handleIsDiffRes:w})]})]}),e.jsx("hr",{className:"my-5"}),n&&e.jsxs("div",{className:"w-[520px] h-[204px] flex flex-col gap-2 left-[33%] p-8 border z-50 shadow-md fixed bottom-10 bg-white",children:[e.jsx("h1",{children:"Items already in cart"}),e.jsx("p",{children:"Your cart contains items from other restaurant. Would you like to reset your cart for adding items from this restaurant?"}),e.jsxs("div",{className:"flex justify-between gap-3 w-full uppercase",children:[e.jsx("button",{onClick:w,className:"border-2 w-1/2 p-3 border-green-600 text-green-600",children:"No"}),e.jsx("button",{onClick:C,className:"  w-1/2 p-3 bg-green-600 text-white ",children:"Yes, start Afresh"})]})]})]})}function oe({data:{info:{header:l,offerLogo:i,couponCode:s}}}){return e.jsxs("div",{className:"flex gap-2  min-w-[328px] border p-3 h-[76px] rounded-2xl",children:[e.jsx("img",{src:"https://media-assets.swiggy.com/swiggy/image/upload/fl_lossy,f_auto,q_auto,w_96,h_96/"+i,alt:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-xl",children:l}),e.jsx("p",{className:"text-gray-500",children:s})]})]})}export{he as default};
